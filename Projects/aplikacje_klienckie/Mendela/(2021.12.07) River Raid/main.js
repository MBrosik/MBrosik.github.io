(()=>{"use strict";var e={192:(e,t,i)=>{i.d(t,{Z:()=>f});var s=i(15),o=i.n(s),a=i(645),n=i.n(a),r=i(667),h=i.n(r),l=i(344),c=n()(o()),d=h()(l.Z);c.push([e.id,'body{padding:0;margin:0}#root{width:100%;height:100vh;display:flex;justify-content:center;align-items:center}@font-face{font-family:"slkscr";src:url('+d+")}","",{version:3,sources:["webpack://./src/style.scss"],names:[],mappings:"AAAA,KACG,SAAA,CACA,QAAA,CAGH,MACG,UAAA,CACA,YAAA,CAEA,YAAA,CACA,sBAAA,CACA,kBAAA,CAGH,WACG,oBAAA,CACA,2CAAA",sourcesContent:["body{\r\n   padding:0;\r\n   margin:0;\r\n}\r\n\r\n#root {\r\n   width: 100%;\r\n   height: 100vh;\r\n\r\n   display:flex;\r\n   justify-content:center;\r\n   align-items:center;\r\n}\r\n\r\n@font-face {\r\n   font-family: 'slkscr';\r\n   src: url('fonts/slkscr/slkscre.ttf');\r\n}"],sourceRoot:""}]);const f=c},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=e(t);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,s){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(s)for(var a=0;a<this.length;a++){var n=this[a][0];null!=n&&(o[n]=!0)}for(var r=0;r<e.length;r++){var h=[].concat(e[r]);s&&o[h[0]]||(i&&(h[2]?h[2]="".concat(i," and ").concat(h[2]):h[2]=i),t.push(h))}},t}},15:e=>{function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}e.exports=function(e){var i,s,o=(s=4,function(e){if(Array.isArray(e))return e}(i=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],s=!0,o=!1,a=void 0;try{for(var n,r=e[Symbol.iterator]();!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}}(i,s)||function(e,i){if(e){if("string"==typeof e)return t(e,i);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?t(e,i):void 0}}(i,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[1],n=o[3];if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),h="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),l="/*# ".concat(h," */"),c=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[a].concat(c).concat([l]).join("\n")}return[a].join("\n")}},667:e=>{e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},344:(e,t,i)=>{i.d(t,{Z:()=>s});const s=i.p+"fonts/07ff5c3a24dfbd43d4b23ef445bf2c40-slkscre.ttf"},379:(e,t,i)=>{var s,o=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),a=[];function n(e){for(var t=-1,i=0;i<a.length;i++)if(a[i].identifier===e){t=i;break}return t}function r(e,t){for(var i={},s=[],o=0;o<e.length;o++){var r=e[o],h=t.base?r[0]+t.base:r[0],l=i[h]||0,c="".concat(h," ").concat(l);i[h]=l+1;var d=n(c),f={css:r[1],media:r[2],sourceMap:r[3]};-1!==d?(a[d].references++,a[d].updater(f)):a.push({identifier:c,updater:u(f,t),references:1}),s.push(c)}return s}function h(e){var t=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var a=i.nc;a&&(s.nonce=a)}if(Object.keys(s).forEach((function(e){t.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(t);else{var n=o(e.insert||"head");if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(t)}return t}var l,c=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,i,s){var o=i?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=c(t,o);else{var a=document.createTextNode(o),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(a,n[t]):e.appendChild(a)}}function f(e,t,i){var s=i.css,o=i.media,a=i.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var m=null,p=0;function u(e,t){var i,s,o;if(t.singleton){var a=p++;i=m||(m=h(t)),s=d.bind(null,i,a,!1),o=d.bind(null,i,a,!0)}else i=h(t),s=f.bind(null,i,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s));var i=r(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<i.length;s++){var o=n(i[s]);a[o].references--}for(var h=r(e,t),l=0;l<i.length;l++){var c=n(i[l]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}i=h}}}}},t={};function i(s){var o=t[s];if(void 0!==o)return o.exports;var a=t[s]={id:s,exports:{}};return e[s](a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");s.length&&(e=s[s.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e=i(379),t=i.n(e),s=i(192);t()(s.Z,{insert:"head",singleton:!1}),s.Z.locals;const o=1e3,a=700;function n(e,t){return{x:e*o,y:t*a}}const r={blocks:{name:"level1",position:n(0,0),startPos:n(.485,-.05)},other:[{type:"helicopter",reversed:!1,position:n(.5,-.6),moveable:!1,helType:"non-shooting"},{type:"helicopter",reversed:!0,position:n(.4,-3.7),moveable:!0,helType:"non-shooting"},{type:"helicopter",reversed:!0,position:n(.64,-1),moveable:!0,helType:"shooting"},{type:"helicopter",reversed:!1,position:n(.64,-3.9),moveable:!0,helType:"shooting"},{type:"ship",reversed:!1,position:n(.28,-.8),moveable:!0},{type:"ship",reversed:!0,position:n(.4,-2.8),moveable:!0},{type:"fighterPlane",reversed:!1,position:n(0,-.3)},{type:"fighterPlane",reversed:!1,position:n(0,-1.8)},{type:"fighterPlane",reversed:!0,position:n(.9,-4.3)},{type:"ballon",position:n(.4,-2.5),moveable:!0,reversed:!1},{type:"ballon",position:n(.4,-2),moveable:!1,reversed:!1},{type:"ballon",position:n(.4,-3.3),moveable:!0,reversed:!0},{type:"fuel",position:n(.6,-2.3)},{type:"fuel",position:n(.4,-1.8)},{type:"fuel",position:n(.55,-3)},{type:"fuel",position:n(.6,-4.7)},{type:"tank",reversed:!1,tankType:"normal",startPos:n(.1,-1.43),endPos:n(.225,-1.43),shotPos:n(.5,-1.38)},{type:"tank",reversed:!1,tankType:"normal",startPos:n(.1,-2.6),endPos:n(.225,-2.6),shotPos:n(.7,-2.55)},{type:"tank",reversed:!0,tankType:"normal",startPos:n(.9,-3.5),endPos:n(.74,-3.5),shotPos:n(.65,-3.45)}]};class h{constructor(e=0,t=0){this.x=e,this.y=t}normalize(){let e=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2));return this.x=1/e*this.x,this.y=1/e*this.y,this}getLength(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}clone(){return new h(this.x,this.y)}distanceTo(e){let t=Math.abs(this.x-e.x),i=Math.abs(this.y-e.y);return Math.sqrt(Math.pow(t,2)+Math.pow(i,2))}dot(e){return this.x*e.x+this.y*e.y}angleTo(e){return Math.acos(this.dot(e)/(this.getLength()*e.getLength()))}getRotateAngle(){return Math.atan2(this.y,this.x)}setRotateAngle(e){this.x=Math.cos(e)*this.getLength(),this.y=Math.sin(e)*this.getLength()}add(e){return this.x+=e.x,this.y+=e.y,this}sub(e){return this.x-=e.x,this.y-=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}}class l{constructor(e,{dx:t=0,dy:i=0,dz:s=0,dw:o=10,dh:a=10},{sx:n=0,sy:r=0,sw:h=e.width,sh:l=e.height}){this.image_info={source:e,width:h,height:l,x:n,y:r},this.map_info={width:o,height:a,x:t,y:i,z:s},this.imageRenderBool=h==e.width&&l==e.height}get pos_vect(){return new h(this.map_info.x,this.map_info.y)}set pos_vect(e){this.map_info.x=e.x,this.map_info.y=e.y}action(e,t){let{width:i,height:s,x:o,y:a}=this.map_info,{source:n,width:r,height:h,x:l,y:c}=this.image_info;e.beginPath(),this.imageRenderBool?e.drawImage(n,o-t.x,a-t.y,i,s):e.drawImage(n,l,c,r,h,o-t.x,a-t.y,i,s),e.closePath()}}class c{constructor(e,t,i,s,o){this.aPaint=e,this.bPaint=t,this.camera=i,this.html_dom=document.createElement("canvas"),this.html_dom.width=s,this.html_dom.height=o,this.ctx=this.html_dom.getContext("2d")}getCollision(e=null){this.ctx.clearRect(0,0,this.html_dom.width,this.html_dom.height);for(const e of this.aPaint.flat())e.action(this.ctx,this.camera);for(const e of this.bPaint.flat()){let{width:t,height:i,x:s,y:o}=e.map_info;const a=this.ctx.getImageData(s-this.camera.x,o-this.camera.y,t,i);e.action(this.ctx,this.camera);const n=this.ctx.getImageData(s-this.camera.x,o-this.camera.y,t,i);for(let e=0;e<a.data.length;e+=4){let t=a.data[e]+a.data[e+1]+a.data[e+2],i=n.data[e]+n.data[e+1]+n.data[e+2];if(0!=t&&t!=i)return!0}}return!1}}function d(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}let f=[],m=[];const p={last_time:Date.now(),time_stamp:0};class u{constructor(e,t,i,s){this.scene=i,this.camera=s,this.html_dom=document.createElement("canvas"),this.html_dom.width=e,this.html_dom.height=t,this.ctx=this.html_dom.getContext("2d"),this.ctx.webkitImageSmoothingEnabled=!1,this.ctx.mozImageSmoothingEnabled=!1,this.ctx.imageSmoothingEnabled=!1,this.backgroundColor="blue",this.stopBool=!1,this.render()}async render(e=this.scene){let{width:t,height:i}=this.html_dom;this.ctx.clearRect(0,0,t,i),this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,t,i);for(const e of f)e();0!=e.mesh_array.length&&e.mesh_array.sort(((e,t)=>{let{x:i,y:s,z:o}=e.map_info,{x:a,y:n,z:r}=t.map_info;return o-r>=1||o-r==0&&s-n>=1||o-r==0&&s-n==0&&i-a>=1?1:-1})),e.mesh_array.forEach((e=>{e.action(this.ctx,this.camera)}));for(const e of m)e();p.time_stamp=Date.now()-p.last_time,p.last_time=Date.now(),this.stopBool||requestAnimationFrame((()=>{this.render()}))}}function y(e){return new Promise((t=>{setTimeout((function(){t(!0)}),e)}))}const g={moveBool:!0};new class{constructor(){window.addEventListener("keydown",this.onkeydown_e),window.addEventListener("keyup",this.onkeyup_e)}onkeydown_e(e){e.code in v&&e.preventDefault(),v[e.code]=!0}onkeyup_e(e){e.code in v&&e.preventDefault(),v[e.code]=!1}};const v={KeyA:!1,KeyD:!1,KeyW:!1,KeyS:!1,KeyQ:!1,KeyE:!1,KeyZ:!1,KeyY:!1,KeyL:!1,Numpad8:!1,Numpad5:!1,Numpad4:!1,Numpad6:!1,Numpad7:!1,Numpad9:!1,ControlLeft:!1,Space:!1};function w(e){return new Promise((t=>{let i=new Audio(e);i.oncanplaythrough=()=>{t(i)}}))}const b=i.p+"audio/a494c5faac8ac608b2dd744a0fc6d275-crush.wav",x=i.p+"audio/a46641155fbf37be3ae62cad6a6e1928-enemyCrush.wav",_=i.p+"audio/ef3914272428a8269eeb848ee423bd77-flyNoise.wav",k=i.p+"audio/02795b1c02b48cfcfa02986ca0cbda01-flyStart.wav",S=i.p+"audio/3a69d06ab883c1c3eaf309451e707b01-Health.wav",P=i.p+"audio/a9dd9d4f92599f30773fab2d52db6ba9-strike.wav",A=i.p+"audio/1d052b84cce8c117346cfa604c5b91fb-tankStrike.wav",C=i.p+"audio/52feab03f0709c93df588194dfef3abf-helicopterStrike.wav";class D{static async getAudios(){D.audios={crush:await w(b),enemyCrush:await w(x),flyNoise:await w(_),flyStart:await w(k),Health:await w(S),strike:await w(P),tankStrike:await w(A),helicopterStrike:await w(C)}}}function T(e){return new Promise((t=>{let i=document.createElement("img");i.src=e,i.onload=()=>{t(i)}}))}function R(e){let t=document.createElement("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.translate(e.width,0),i.scale(-1,1),i.drawImage(e,0,0);let s=document.createElement("img");return s.src=t.toDataURL("image/png"),s}const B=i.p+"images/9870d92f394ec74bb9665b19a8b05f62-plane-straight.png",I=i.p+"images/d1e0b371532e3e9f38d831bc4bbef02b-plane-right.png",M=i.p+"images/15ebc884ca638449c6f7bceea7769230-plane-left.png",N=i.p+"images/8d7c90423d6887ef94945962d2994c36-plane-crash.png",j=i.p+"images/ee311af1445da2476f8cb5b6a7548e37-plane-level-pos.png",E=i.p+"images/106c2f115aa73d0cdc06477fd10cf443-helicopter1.png",L=i.p+"images/2f1881073dac1707625e9baa6c2963f1-helicopter2.png",O=i.p+"images/efba3f8cf0895e39519f11757a7224d3-fighterHelicopter1.png",H=i.p+"images/95aa30d90754015514f5726170838acd-fighterHelicopter2.png",z=i.p+"images/52b6c3a65320aabb6349328d74de3fc6-tank1.png",K=i.p+"images/1e6c9c15480d7eb67c689e64ba5f8f4d-tank2.png",F=i.p+"images/6686d9d1feb8b7678da5c23b775cdc72-tankBullet0.png",U=i.p+"images/63eeea7e6d18efc6c335e3ec584088d4-tankBullet1.png",G=i.p+"images/f0a8e349e179b0a9a41562f7750a0866-tankBullet2.png",Z=i.p+"images/e4ab5704b4b3ea3acf3cd273fef4aaf2-tankBullet3.png",q=i.p+"images/77c83312205cd200f233b13fc5ae6cc8-tankBullet4.png",$=i.p+"images/9cdd47b60f6e4f0937b23ef6ed757178-tankBullet5.png",J=i.p+"images/976cfef2516357c1091ea7ad2c323f3c-tankBullet6.png",W=i.p+"images/77c18a9f107f3025303a64dfb5e8e8b6-ship.png",Q=i.p+"images/864482f64d7425d9fef858dba4803673-fighterPlane.png",Y=i.p+"images/7156877ae5d3275eab1d1a03b3036dbf-ballon.png",V=i.p+"images/4e0563b5894188453fb9ff5ab2a69e2f-fuel.png",X=i.p+"images/a355110ae7ecdcc3c495ab1888462184-bridge.png",ee=i.p+"images/c7a4b1ab5b02b39d8c65f8e52a026ed1-gasStatusBar.png",te=i.p+"images/c6c71535ef238c47af70a1314e5e16fc-level1.png",ie=i.p+"images/a56e63a727ed435b7b0d09f940065942-level2.png";let se;class oe{constructor(e,t){this.map_info={width:5,height:10,x:e,y:t,z:3},this.move=this.move.bind(this),f.push(this.move),this.colider=new c(Ce.blocks,[this],Ce.camera,o,a)}action(e,t){const{width:i,height:s,x:o,y:a}=this.map_info;e.beginPath(),e.fillStyle="yellow",e.rect(o-t.x,a-t.y,i,s),e.fill()}move(){this.map_info.x=Ce.player.map_info.x+Ce.player.map_info.width/2-this.map_info.width/2,this.map_info.y-=20,this.map_info.y-Ce.camera.y<0?(Ce.scene.remove(this),f.removeIf((e=>e==this.move))):this.checkCollision()}checkCollision(){for(const e of[...Ce.enemies,...Ce.fuels])if(d(e.map_info,this.map_info))return e.destroy(),Ce.scene.remove(this),void f.removeIf((e=>e==this.move));this.colider.getCollision()&&(Ce.scene.remove(this),f.removeIf((e=>e==this.move)))}}function ae(e=function(){Ce.scene.remove(this)}){return function(t,i,s){let o=s.value;s.value=async function(...t){this instanceof re||D.audios.enemyCrush.cloneNode(!0).play(),o.bind(this)();let i=document.createElement("canvas");i.width=this.image_info.source.width,i.height=this.image_info.source.height;let s=i.getContext("2d");for(let e=1;e<5;e++){s.clearRect(0,0,i.width,i.height),s.drawImage(this.image_info.source,0,0);const t=s.getImageData(0,0,i.width,i.height);s.clearRect(0,0,i.width,i.height);const o=s.getImageData(0,0,i.width,i.height);for(let i=0;i<t.data.length;i+=4*Math.ceil(e*Math.random()))o.data[i]=t.data[i],o.data[i+1]=t.data[i+1],o.data[i+2]=t.data[i+2],o.data[i+3]=t.data[i+3];s.putImageData(o,0,0);let a=document.createElement("img");a.src=i.toDataURL("image/png"),this.image_info.source=a,await y(100)}e.bind(this)()}}}var ne=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class re extends l{constructor(){const{plane:e}=se;e.straight.width,e.straight.height,super(e.straight,{dx:470,dy:455,dz:2,dw:30,dh:30},{}),this.startPosition={x:this.map_info.x,y:this.map_info.y},this.plane=e,this.deltaShot=200,this.lastShot=Date.now(),this.enemyColider=new c([Ce.enemies,Ce.blocks],[this],Ce.camera,o,a),f.push(this.playerMove.bind(this)),this.init()}async init(){D.audios.flyStart.play(),D.audios.flyStart.onended=()=>{g.moveBool&&(D.audios.flyNoise.loop=!0,D.audios.flyNoise.play())}}async playerMove(){if(!g.moveBool)return;let e=Ce.blocks.findIndex((e=>{return t=this.map_info.y,i=e.map_info.y,s=e.map_info.y+e.map_info.height,t>=i&&t<=s;var t,i,s}));if(e>=0&&(Ce.scoreBoard.levelPos=e+1),v.KeyW?(this.map_info.y-=5,Ce.camera.y-=5):v.KeyS?(this.map_info.y-=1,Ce.camera.y-=1):(this.map_info.y-=3,Ce.camera.y-=3),v.KeyA?(this.map_info.x-=5,this.image_info.source=this.plane.left):v.KeyD?(this.map_info.x+=5,this.image_info.source=this.plane.right):this.image_info.source=this.plane.straight,v.Space&&Date.now()-this.lastShot>this.deltaShot){D.audios.strike.cloneNode(!0).play();const{x:e,y:t,width:i}=this.map_info;let s=new oe(e+i/2,t);Ce.scene.add(s),this.lastShot=Date.now()}let t=Ce.enemies.find((e=>(this.enemyColider.aPaint=[e],this.enemyColider.getCollision())));null!=t?(t.destroy(),this.checkLives()):(this.enemyColider.aPaint=Ce.blocks,this.enemyColider.getCollision()&&this.checkLives()),Ce.fuels.some((e=>d(e.map_info,this.map_info)))&&Ce.scoreBoard.addFuel()}checkLives(){for(const e in D.audios){let t=D.audios[e];t.pause(),t.currentTime=0}D.audios.crush.play(),g.moveBool=!1}async restartGame(){await y(1e3),Ce.scoreBoard.lives--,Ce.scoreBoard.fuelStatus=1,g.moveBool=!0,Ce.paintMap()}}!function(e,t,i,s){var o,a=arguments.length,n=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(a<3?o(n):a>3?o(t,i,n):o(t,i))||n);a>3&&n&&Object.defineProperty(t,i,n)}([ae((function(){Ce.scene.remove(this),Ce.scoreBoard.lives<=0?(Ce.scoreBoard.lives=0,Ce.scoreBoard.HighScore<Ce.scoreBoard.score&&(Ce.scoreBoard.HighScore=Ce.scoreBoard.score)):this.restartGame()})),ne("design:type",Function),ne("design:paramtypes",[]),ne("design:returntype",void 0)],re.prototype,"checkLives",null);class he{constructor(e=0,t=0){this.x=e,this.y=t}}class le{constructor(){this.mesh_array=[]}add(...e){this.mesh_array.push(...e)}remove(e){this.mesh_array=this.mesh_array.filter((t=>t!=e))}}var ce=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class de extends l{constructor(e,t){super(e,t,{}),this.distanceToPlayer=500,this.activate=this.activate.bind(this),this.move=this.move.bind(this),f.push(this.activate)}fly(){}activate(){Math.abs(Ce.player.map_info.y-this.map_info.y)<this.distanceToPlayer&&this.movable&&this.map_info.y-Ce.camera.y<Ce.renderer.html_dom.height-this.map_info.height&&this.map_info.y-Ce.camera.y>0&&g.moveBool&&this.move(),this.movable||f.removeIf((e=>e==this.activate))}destroy(){f.removeIf((e=>e==this.activate)),f.removeIf((e=>e==this.fly)),Ce.scoreBoard.score+=200,Ce.enemies.removeIf((e=>e==this))}}!function(e,t,i,s){var o,a=arguments.length,n=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(a<3?o(n):a>3?o(t,i,n):o(t,i))||n);a>3&&n&&Object.defineProperty(t,i,n)}([ae(),ce("design:type",Function),ce("design:paramtypes",[]),ce("design:returntype",void 0)],de.prototype,"destroy",null);class fe{constructor(e,t,i,s){this.map_info={width:10,height:5,x:i?e-10:e,y:t,z:3},this.reversed=i,this.move=this.move.bind(this),f.push(this.move),this.colider=s,D.audios.helicopterStrike.cloneNode(!0).play()}action(e,t){const{width:i,height:s,x:o,y:a}=this.map_info;e.beginPath(),e.fillStyle="yellow",e.rect(o-t.x,a-t.y,i,s),e.fill()}move(){this.map_info.x+=this.reversed?-20:20,this.map_info.y-Ce.camera.y<0?(Ce.scene.remove(this),f.removeIf((e=>e==this.move))):this.checkCollision()}checkCollision(){if(d(Ce.player.map_info,this.map_info))return Ce.player.checkLives(),Ce.scene.remove(this),void f.removeIf((e=>e==this.move));this.colider.aPaint=Ce.blocks,this.colider.bPaint=[this],this.colider.getCollision()&&(Ce.scene.remove(this),f.removeIf((e=>e==this.move)))}}class me extends de{constructor(e,t,i,{x:s,y:n}){const r=se.enemies["non-shooting"==i?"helicopter":"fighterHelicopter"];let h=e?r.reversed:r.normal,l=h[0].width/h[0].height;super(h[0],{dx:s,dy:n,dz:2,dw:40,dh:40/l}),this.movable=t,this.reverse=e,this.helType=i,this.dateNow=Date.now(),this.timeStamp=100,this.colider=new c(Ce.blocks,[this],Ce.camera,o,a),"shooting"==this.helType&&(this.bulletColider=new c(Ce.blocks,[this],Ce.camera,o,a)),this.deltaShot=200,this.lastShot=Date.now(),this.fly=this.fly.bind(this),f.push(this.fly)}fly(){const e=se.enemies["non-shooting"==this.helType?"helicopter":"fighterHelicopter"];let t=this.reverse?"reversed":"normal";Date.now()-this.dateNow>this.timeStamp&&(this.image_info.source==e[t][0]?this.image_info.source=e[t][1]:this.image_info.source=e[t][0],this.dateNow=Date.now())}move(){let{x:e,y:t,width:i,height:s}=this.map_info;e+=this.reverse?-5:5,this.colider.getCollision()&&(this.reverse=!this.reverse),this.map_info.x+=this.reverse?-5:5,"shooting"==this.helType&&this.strike()}strike(){if(Date.now()-this.lastShot>this.deltaShot){const{x:e,y:t,width:i,height:s}=this.map_info;let o=this.reverse?this.map_info.x:e+i,a=new fe(o,t+s/2,this.reverse,this.bulletColider);Ce.scene.add(a),this.lastShot=Date.now()}}}class pe extends de{constructor(e,t,{x:i,y:s}){const{ship:n}=se.enemies;let r=e?n.reversed:n.normal;super(r,{dx:i,dy:s,dz:2,dw:100,dh:100/(r.width/r.height)}),this.movable=t,this.reverse=e,this.colider=new c(Ce.blocks,[this],Ce.camera,o,a)}move(){const{ship:e}=se.enemies;let{x:t,y:i,width:s,height:o}=this.map_info;t+=this.reverse?-5:5,this.getCollision()&&(this.reverse=!this.reverse,this.image_info.source=this.reverse?e.reversed:e.normal),this.map_info.x+=this.reverse?-5:5}getCollision(){const{ship:e}=se.enemies;let t=this.colider.getCollision();this.image_info.source=this.image_info.source==e.normal?e.reversed:e.normal;let i=this.colider.getCollision();return this.image_info.source=this.image_info.source==e.normal?e.reversed:e.normal,t||i}}class ue extends de{constructor(e,{x:t,y:i}){const{fighterPlane:s}=se.enemies;let o=e?s.reversed:s.normal;super(o,{dx:t,dy:i,dz:2,dw:50,dh:50/(o.width/o.height)}),this.movable=!0,this.reverse=e}move(){this.map_info.x+=this.reverse?-10:10,this.map_info.x>o&&(this.map_info.x=0)}}class ye extends l{constructor(e,t){const{bullets:i}=se.enemies.tank;super(i[0],{dx:20,dy:20,dz:2,dw:1*i[0].width,dh:1*i[0].height},{}),this.whMultiplier=1,this.startPos=e,this.endPos=t,Ce.scene.add(this),this.startTime=Date.now(),this.timeStamp=400,this.colorRaycaster=new c([Ce.player],[this],Ce.camera,o,a),this.killTime=Date.now(),this.killTimeStamp=100,this.killIterator=0,this.boom=this.boom.bind(this),this.fly=this.fly.bind(this),f.push(this.fly),D.audios.tankStrike.cloneNode(!0).play()}fly(){const{x:e,y:t}=this.endPos;let i=e-this.startPos.x,s=t-this.startPos.y,o=(Date.now()-this.startTime)/this.timeStamp;if(o<1){let e=i*o,t=Math.sin(e*(Math.PI/i))/(Math.PI/2)*-25+s/i*e;this.map_info.x=this.startPos.x+e-this.map_info.width/2,this.map_info.y=this.startPos.y+t-this.map_info.height/2}else this.map_info.x=this.endPos.x-this.map_info.width/2,this.map_info.y=this.endPos.y-this.map_info.height/2,this.killTime=Date.now(),f.removeIf((e=>e==this.fly)),f.push(this.boom)}boom(){this.colorRaycaster.getCollision()&&Ce.player.checkLives();const{bullets:e}=se.enemies.tank;Date.now()-this.killTime>this.killTimeStamp&&(this.killIterator<6?(this.killIterator++,this.image_info.source=e[this.killIterator],this.map_info.width=this.image_info.source.width*this.whMultiplier,this.map_info.height=this.image_info.source.height*this.whMultiplier,this.map_info.x=this.endPos.x-this.map_info.width/2,this.map_info.y=this.endPos.y-this.map_info.height/2):(this.colorRaycaster.html_dom.remove(),Ce.scene.remove(this),f.removeIf((e=>e==this.boom))),this.killTime=Date.now())}}class ge extends de{constructor(e,t,i,s,o=null){const{tank:a}=se.enemies;let n=t?a.reversed[0]:a.normal[0],r=50/(n.width/n.height);super(n,{dx:i.x,dy:i.y,dz:2,dw:50,dh:r}),this.startPos=i,this.endPos=s,this.startTime=Date.now(),this.speed=50,this.movable=!0,this.reverse=t,this.type=e,this.moveDateNow=Date.now(),this.moveTimeStamp=50,this.shotPos=o,this.shootDateNow=Date.now(),this.shootTimeStamp=1e3,this.distanceToPlayer=5e3,this.moveAnimation=this.moveAnimation.bind(this),this.destroy}moveAnimation(){const{tank:e}=se.enemies;let t=this.reverse?"reversed":"normal";Date.now()-this.moveDateNow>this.moveTimeStamp&&(this.image_info.source==e[t][0]?this.image_info.source=e[t][1]:this.image_info.source=e[t][0],this.moveDateNow=Date.now())}move(){this.startTime=Date.now(),this.move=this.move1}move1(){this.moveAnimation(),this.map_info.x+=(this.endPos.x-this.startPos.x)/this.speed,this.map_info.y+=(this.endPos.y-this.startPos.y)/this.speed,(this.reverse?this.map_info.x<this.endPos.x:this.map_info.x>this.endPos.x)&&(this.map_info.x=this.endPos.x,this.map_info.y=this.endPos.y,"normal"==this.type?this.move=this.shoot:this.move=this.moveAnimation)}shoot(){if(this.moveAnimation(),Date.now()-this.shootDateNow>this.shootTimeStamp){let e=JSON.parse(JSON.stringify(this.endPos));this.reverse||(e.x+=this.image_info.width),e.y+=7,new ye(e,this.shotPos),this.shootDateNow=Date.now()}}}var ve=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class we extends l{constructor(e,t,i,s,n){const{bridge:r}=se;super(r,{dx:e,dy:t,dw:i,dh:s},{});let h={x:n.startPos,y:t+s/2-25},l={x:n.endPos,y:t+s/2-25};this.tank=new ge("onBridge",n.reversed,h,l),this.tank.speed=300,Ce.scene.add(this.tank),this.colorRaycaster=new c([this],[this.tank],Ce.camera,o,a),document.getElementById("aa")?.appendChild(this.colorRaycaster.html_dom)}async destroy(){this.colorRaycaster.getCollision()?this.tank.destroy():this.tank.move=this.tank.moveAnimation,Ce.enemies.removeIf((e=>e==this));for(let e=0;e<4;e++)Ce.renderer.backgroundColor=e%2==0?"purple":"blue",await y(200)}}!function(e,t,i,s){var o,a=arguments.length,n=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(a<3?o(n):a>3?o(t,i,n):o(t,i))||n);a>3&&n&&Object.defineProperty(t,i,n)}([ae(),ve("design:type",Function),ve("design:paramtypes",[]),ve("design:returntype",Promise)],we.prototype,"destroy",null);class be{constructor(){this.map_info={x:0,y:560,z:5,width:o,height:140},this.loseFuelDateNow=Date.now(),this.loseFuelTimeStamp=100,this.fuelDateNow=Date.now(),this.fuelTimeStamp=200,this.fuelStatus=1,this.score=0,this.lives=4,this.levelPos=1,this.fuelUsage=this.fuelUsage.bind(this),this.addToRender()}addToRender(){f.push(this.fuelUsage)}get HighScore(){return parseInt(sessionStorage.getItem("HighScore")||"0")}set HighScore(e){sessionStorage.setItem("HighScore",e.toString())}async fuelUsage(){g.moveBool&&(Date.now()-this.loseFuelDateNow<=this.loseFuelTimeStamp||(this.loseFuelDateNow=Date.now(),v.KeyW?this.fuelStatus-=.01:v.KeyS?this.fuelStatus-=.002:this.fuelStatus-=.005,this.fuelStatus<=0&&(this.fuelStatus=0,Ce.player.checkLives())))}addFuel(){Date.now()-this.fuelDateNow>this.fuelTimeStamp&&(D.audios.Health.cloneNode(!0).play(),this.fuelStatus+=.2,this.fuelDateNow=Date.now(),this.fuelStatus>=1&&(this.fuelStatus=1))}action(e,t){const{x:i,y:s,width:o,height:a}=this.map_info,{gasStatusBar:n}=se,{levelPos:r}=se.plane;let h=n.width/n.height,l=380+240*this.fuelStatus-7,c=s+50;e.beginPath(),e.fillStyle="grey",e.rect(i,s,o,a),e.fill(),e.fillStyle="yellow",e.font="50px slkscr",e.textAlign="end",e.fillText(this.score.toString(),500,s+40),e.beginPath(),e.fillStyle="yellow",e.rect(l,c,14,60),e.fill(),e.drawImage(n,350,s+50,300,300/h);for(let t=0;t<this.lives;t++)e.drawImage(r,o-300+60*t,s+90);e.fillStyle="black",e.font="35px slkscr",e.textAlign="left",e.fillText("HI",o-300,s+40),e.textAlign="right",e.fillText(this.HighScore.toString(),o-20,s+40),e.fillStyle="yellow",e.font="35px slkscr",e.textAlign="left",e.fillText("BRIDGE",o-300,s+70),e.textAlign="right",e.fillText(this.levelPos.toString(),o-20,s+70),e.fillStyle="black",e.font="40px slkscr",e.textAlign="center",e.fillText("GAME",250,s+80),e.fillText("1",250,s+110),e.fillStyle="yellow",e.font="40px slkscr",e.textAlign="left",e.fillText("P1",190,s+40)}}class xe extends l{constructor(e,t,i){let s=se.levels[e],a=o/(s.width/s.height);super(s,{dx:t,dy:i-a,dz:0,dw:o,dh:a},{})}}var _e=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class ke extends l{constructor(e,t){let i=40/(se.fuel.width/se.fuel.height);super(se.fuel,{dx:e,dy:t,dw:40,dh:i},{})}destroy(){Ce.fuels.removeIf((e=>e==this))}}!function(e,t,i,s){var o,a=arguments.length,n=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(n=(a<3?o(n):a>3?o(t,i,n):o(t,i))||n);a>3&&n&&Object.defineProperty(t,i,n)}([ae(),_e("design:type",Function),_e("design:paramtypes",[]),_e("design:returntype",void 0)],ke.prototype,"destroy",null);class Se extends de{constructor(e,t,i,s){const{ballon:n}=se.enemies;super(n,{dx:e,dy:t,dw:40,dh:40/(n.width/n.height)}),this.movable=i,this.reverse=s,this.colider=new c(Ce.blocks,[this],Ce.camera,o,a)}move(){let{x:e,y:t,width:i,height:s}=this.map_info;e+=this.reverse?-2:2,this.colider.getCollision()&&(this.reverse=!this.reverse),this.map_info.x+=this.reverse?-2:2}}function Pe(e,t){return{x:e*o,y:t*a}}const Ae={blocks:{name:"level2",position:Pe(0,0),startPos:Pe(.485,-.05)},other:[{type:"bridge",position:Pe(.4,-.09),width:200,height:59.50000000000001,tank:{startPos:Pe(.8,-.09).x,endPos:Pe(.2,-.09).x,reversed:!0}}]};let Ce;Array.prototype.myRandom=function(){return this[Math.floor(Math.random()*this.length)]},Array.prototype.removeIf=function(e){for(var t=0;t<this.length;)e(this[t],t,this)?this.splice(t,1):++t},new class{constructor(){this.scene=new le,this.camera=new he,this.renderer=new u(o,a,this.scene,this.camera),this.enemies=[],this.blocks=[],this.bridges=[],this.fuels=[],Ce=this,document.getElementById("root")?.appendChild(this.renderer.html_dom),this.init()}async init(){await async function(){se={plane:{straight:await T(B),left:await T(M),right:await T(I),crash:await T(N),levelPos:await T(j)},enemies:{helicopter:{normal:[await T(E),await T(L)],reversed:[R(await T(E)),R(await T(L))]},fighterHelicopter:{normal:[await T(O),await T(H)],reversed:[R(await T(O)),R(await T(H))]},ship:{normal:await T(W),reversed:R(await T(W))},tank:{bullets:[await T(F),await T(U),await T(G),await T(Z),await T(q),await T($),await T(J)],normal:[await T(z),await T(K)],reversed:[R(await T(z)),R(await T(K))]},fighterPlane:{normal:R(await T(Q)),reversed:await T(Q)},ballon:await T(Y)},levels:{level1:await T(te),level2:await T(ie)},fuel:await T(V),bridge:await T(X),gasStatusBar:await T(ee)}}(),await D.getAudios(),g.moveBool=!1,this.scoreBoard=new be,this.scene.add(this.scoreBoard);let e=new Promise((e=>{document.body.onclick=async()=>{e(!0)}})),t=new Promise((e=>{window.addEventListener("keydown",(()=>{e(!0)}))}));await Promise.race([e,t]),this.paintMap()}paintMap(){g.moveBool=!0;for(const e in D.audios){let t=D.audios[e];t.pause(),t.currentTime=0}this.scene.mesh_array=[],f.removeIf((e=>!0)),m.removeIf((e=>!0)),this.enemies=[],this.blocks=[],this.bridges=[],this.fuels=[],this.scene.add(this.scoreBoard),this.scoreBoard.addToRender(),this.player=new re,this.scene.add(this.player);[r,Ae].forEach(((e,t,i)=>{let s=i[Math.max(0,t-1)],a=se.levels[s.blocks.name],n=420-t*o/(a.width/a.height);const{name:r,position:h,startPos:l}=e.blocks;let c=new xe(r,h.x+0,h.y+n);this.blocks.push(c),this.scene.add(c),t==this.scoreBoard.levelPos-1&&(this.camera.y=l.y+n-420,this.player.map_info.y=l.y+n,this.player.map_info.x=l.x);for(const i of e.other)if("helicopter"==i.type){let e=new me(i.reversed,i.moveable,i.helType,{x:i.position.x,y:i.position.y+n});this.scene.add(e),this.enemies.push(e)}else if("tank"==i.type){let e={x:i.startPos.x,y:i.startPos.y+n},t={x:i.endPos.x,y:i.endPos.y+n},s={x:i.shotPos.x,y:i.shotPos.y+n},o=new ge(i.tankType,i.reversed,e,t,s);this.scene.add(o),this.enemies.push(o)}else if("ship"==i.type){let e=new pe(i.reversed,i.moveable,{x:i.position.x,y:i.position.y+n});this.scene.add(e),this.enemies.push(e)}else if("fighterPlane"==i.type){let e=new ue(i.reversed,{x:i.position.x,y:i.position.y+n});this.scene.add(e),this.enemies.push(e)}else if("ballon"==i.type){let e=new Se(i.position.x,i.position.y+n,i.moveable,i.reversed);this.scene.add(e),this.enemies.push(e)}else if("bridge"==i.type&&t!=this.scoreBoard.levelPos-1){const{x:e,y:t}=i.position;let s=new we(e,t+n,i.width,i.height,i.tank);this.scene.add(s),this.enemies.push(s)}else if("fuel"==i.type){const{x:e,y:t}=i.position;let s=new ke(e,t+n);this.fuels.push(s),this.scene.add(s)}}))}}})()})();
//# sourceMappingURL=bundle.js.map